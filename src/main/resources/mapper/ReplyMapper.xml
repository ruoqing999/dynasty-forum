<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoqing.dynastyForum.mapper.ReplyMapper">

    <select id="listReply" resultType="com.ruoqing.dynastyForum.vo.ReplyVO">
        select du.avatar, du.nick_name, dr.content, dr.create_time, dr.comment_id, dr.reply_id, dr.parent_reply_id,
               duu.nick_name as reply_nick_name
        from dy_reply dr
        left join dy_user du on dr.user_id = du.user_id
        left join dy_user duu on dr.reply_user_id = duu.user_id
        <where>
            dr.`status` = 0
            <if test="commentIds != null and commentIds.size() > 0">
                and dr.comment_id in
                <foreach collection="commentIds" item="commentId" open="(" separator="," close=")">
                    #{commentId}
                </foreach>
            </if>
        </where>
    </select>
</mapper>
